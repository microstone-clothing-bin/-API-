<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì§€ë„ + ì‚¬ì´ë“œë°” ì˜ˆì œ</title>
    <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId="></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .left-menu {
            width: 60px;
            background-color: #2d2d2d;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            color: white;
        }

        .left-menu div {
            margin: 20px 0;
            cursor: pointer;
            font-size: 14px;
        }

        .search-container {
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 20px;
            padding: 5px 10px;
            margin-bottom: 15px;
        }

        .search-container input {
            border: none;
            outline: none;
            font-size: 14px;
            flex: 1;
            padding: 5px;
            border-radius: 20px;
            background-color: transparent;
        }

        .search-icon {
            font-size: 16px;
            color: #6f42c1;
            margin-left: 5px;
        }

        .sidebar {
            width: 300px;
            background-color: #ffffff;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            background: linear-gradient(135deg, #6f42c1, #9b59b6);
            color: white;
            padding: 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .weather-info {
            font-size: 14px;
            margin-top: 5px;
        }

        .menu-cards {
            padding: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .menu-card {
            width: 120px;
            height: 100px;
            background-color: #f1f3f5;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s;
        }

        .menu-card:hover {
            background-color: #e9ecef;
        }

        .map-container {
            flex: 1;
            position: relative;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- ì™¼ìª½ ê³ ì • ë©”ë‰´ -->
    <div class="left-menu">
        <div>ğŸ <br/>í™ˆ</div>
        <div>ğŸ•“<br/>ìµœê·¼</div>
        <div>ğŸ“<br/>ì €ì¥</div>
        <div style="margin-top: auto; margin-bottom: 20px;">ğŸ”<br/>ë¡œê·¸ì¸</div>
    </div>

    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="search-container">
                <input type="text" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." id="searchInput" />
                <span class="search-icon">ğŸ”</span>
            </div>
            ì–‘ì£¼ì‹œ ì€í˜„ë©´
            <div class="weather-info">ğŸŒ™ 17Â° | ì˜¤ë¥˜ì‹ ê³ </div>
        </div>

        <div class="menu-cards">
            <div class="menu-card">âš¡<br/>ì „ê¸°ì°¨ ì¶©ì „ì†Œ</div>
            <div class="menu-card">ğŸ…¿ï¸<br/>ê³µì˜ì£¼ì°¨ì¥</div>
            <div class="menu-card">ğŸ§ª<br/>ì˜ë¥˜ìˆ˜ê±°í•¨</div>
            <div class="menu-card">ğŸ <br/>í¡ì—°ë¶€ìŠ¤</div>
        </div>
    </div>

    <!-- ì§€ë„ ì˜ì—­ -->
    <div class="map-container">
        <div id="map"></div>
    </div>
</div>

<script>
    var map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(37.5666805, 126.9784147),
        zoom: 14,
        zoomControl: true,
        zoomControlOptions: {
            style: naver.maps.ZoomControlStyle.SMALL,
            position: naver.maps.Position.TOP_RIGHT
        }
    });

    var infowindow = new naver.maps.InfoWindow();

    const places = [
        {
            name: "ì„œìš¸íŠ¹ë³„ì‹œì²­",
            position: new naver.maps.LatLng(37.5666805, 126.9784147),
            info: `
                <div class="iw_inner">
                    <h3>ì„œìš¸íŠ¹ë³„ì‹œì²­</h3>
                    <p>ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ íƒœí‰ë¡œ1ê°€ 31<br />
                    <a href="http://www.seoul.go.kr" target="_blank">www.seoul.go.kr</a></p>
                </div>`
        },
        {
            name: "ì–‘ì£¼ì‹œì²­",
            position: new naver.maps.LatLng(37.7853, 127.0457),
            info: `
                <div class="iw_inner">
                    <h3>ì–‘ì£¼ì‹œì²­</h3>
                    <p>ê²½ê¸°ë„ ì–‘ì£¼ì‹œ ë¶€í¥ë¡œ 1533<br />
                    <a href="http://www.yangju.go.kr" target="_blank">www.yangju.go.kr</a></p>
                </div>`
        }
    ];

    const markers = [];

    places.forEach(place => {
        const marker = new naver.maps.Marker({
            position: place.position,
            map: map
        });

        naver.maps.Event.addListener(marker, "click", function () {
            infowindow.setContent(place.info);
            infowindow.open(map, marker);
        });

        markers.push({ name: place.name, marker: marker, info: place.info });
    });

    document.getElementById("searchInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            const query = e.target.value.trim().toLowerCase();
            const found = markers.find(m => m.name.toLowerCase().includes(query));

            if (found) {
                map.panTo(found.marker.getPosition());
                infowindow.setContent(found.info);
                infowindow.open(map, found.marker);
            } else {
                alert("ì¼ì¹˜í•˜ëŠ” ì¥ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.");
            }
        }
    });

    // âœ… ë‚ ì”¨ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜
    async function fetchWeather() {
        const serviceKey = ""; // â† ì—¬ê¸°ì— Encodingëœ ì¸ì¦í‚¤ ì…ë ¥
        const baseDate = getToday(); // ì˜¤ëŠ˜ ë‚ ì§œ
        const baseTime = "0500"; // ë°œí‘œ ì‹œê° (ex. 0200, 0500, 0800 ë“±)
        const nx = 60;  // ì–‘ì£¼ì‹œ ì€í˜„ë©´ ê²©ì X
        const ny = 130; // ì–‘ì£¼ì‹œ ì€í˜„ë©´ ê²©ì Y

        const url = `https://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst?` +
            `serviceKey=${serviceKey}&numOfRows=100&pageNo=1&dataType=JSON&base_date=${baseDate}&base_time=${baseTime}&nx=${nx}&ny=${ny}`;

        try {
            const res = await fetch(url);
            const data = await res.json();
            const items = data.response.body.items.item;

            const weatherItem = items.find(item => item.category === "TMP"); // í˜„ì¬ ê¸°ì˜¨
            const temp = weatherItem ? weatherItem.fcstValue : "N/A";

            document.getElementById("weather").textContent = `ğŸŒ¡ í˜„ì¬ ê¸°ì˜¨: ${temp}Â°C | ì˜¤ë¥˜ì‹ ê³ `;
        } catch (err) {
            console.error("ë‚ ì”¨ API ì˜¤ë¥˜:", err);
            document.getElementById("weather").textContent = "âš  ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
        }
    }

    // âœ… ì˜¤ëŠ˜ ë‚ ì§œ (yyyymmdd) ë°˜í™˜
    function getToday() {
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        return `${yyyy}${dd}${mm}`;
    }

    fetchWeather(); // ì‹¤í–‰
</script>

</body>
</html>
